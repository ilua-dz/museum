const menuButton=document.querySelector(".menu-icon"),menuButtonOffset=document.querySelector(".menu-icon-container"),welcomeTitle=document.querySelector(".welcome-title"),welcomeDescr=document.querySelector(".welcome-descr"),welcomeButton=document.querySelector(".welcome-button"),headerNavList=document.querySelector(".nav-list-header"),welcomeSection=document.querySelector(".welcome-container"),navItemsHeader=document.querySelectorAll(".nav-item-header"),overlay=document.querySelector(".overlay");let menuIsClosed=!0;const menuToggle=()=>{menuButton.classList.toggle("menu-icon-active"),welcomeTitle.classList.toggle("menu-active"),welcomeDescr.classList.toggle("menu-active"),welcomeButton.classList.toggle("menu-active"),welcomeSection.classList.toggle("welcome-menu-active"),headerNavList.classList.toggle("side-menu-active"),overlay.classList.toggle("overlay-active"),menuIsClosed=!menuIsClosed};overlay.addEventListener("click",()=>menuToggle()),menuButtonOffset.addEventListener("click",()=>menuToggle()),navItemsHeader.forEach(i=>i.addEventListener("click",()=>menuToggle()));const setOverlayBodySize=()=>{let bodyHeight=document.querySelector("body").offsetHeight,bodyWidth=document.querySelector("body").offsetWidth;overlay.style.height=bodyHeight+"px",overlay.style.width=bodyWidth+"px"};window.addEventListener("resize",()=>setOverlayBodySize()),document.addEventListener("DOMContentLoaded",()=>setOverlayBodySize());const welcomeSlider=new Swiper(".welcome-slider",{direction:"horizontal",loop:!0,effect:"slide",pagination:{el:".swiper-pagination",clickable:".true"},navigation:{nextEl:".pag-right-arrow",prevEl:".pag-left-arrow"}});document.getElementById("slide-number").textContent="0"+welcomeSlider.activeIndex,welcomeSlider.on("slideChange",(function(){document.getElementById("slide-number").textContent=`0${welcomeSlider.realIndex+1}`}));const compContainer=document.querySelector(".img-compare-container");window.addEventListener("resize",()=>{let compContainerWidth=compContainer.offsetWidth;compContainer.style.height=.97*compContainerWidth+"px"});const compareOverlay=document.querySelector(".img-compare-overlay");function compareInit(){let compContainerWidth=compContainer.offsetWidth,h=compareOverlay.offsetHeight;compareOverlay.style.width=.61*compContainerWidth+"px",slider.style.top=.5*h-slider.offsetHeight/2+"px",slider.style.left=.61*compContainerWidth-slider.offsetWidth/2+"px",window.innerWidth<769&&(slider.style.top=.52*h-slider.offsetHeight/2+"px")}let pressed=0,w=compareOverlay.offsetWidth;const slider=document.createElement("div");function slideReady(event){event.preventDefault(),pressed=1,window.addEventListener("mousemove",slideMove),window.addEventListener("touchmove",slideMove)}function slideMove(event){if(0==pressed)return!1;let position=getCursorPosition(event);position<0&&(position=0),position>w&&(position=w),slide(position)}function getCursorPosition(event){let a=compareOverlay.getBoundingClientRect(),pos=event.pageX-a.left;return event=event||window.event,pos-=window.pageXOffset,pos}function slide(pos){compareOverlay.style.width=pos+"px",slider.style.left=compareOverlay.offsetWidth-slider.offsetWidth/2+"px"}slider.setAttribute("class","img-compare-slider"),compareOverlay.parentElement.insertBefore(slider,compareOverlay),document.addEventListener("DOMContentLoaded",()=>compareInit()),window.addEventListener("resize",()=>compareInit()),slider.addEventListener("mousedown",slideReady),window.addEventListener("mouseup",()=>pressed=0);const videoPlayer=document.querySelector(".video-view"),videoPlayButton=document.querySelector(".play-button"),videoPlayBigButton=document.querySelector(".play-big-button"),videoPauseButton=document.querySelector(".pause-button"),videoVolumeOffButton=document.querySelector(".volume-toggle"),videoVolumeOnButton=document.querySelector(".mute"),videoFSButton=document.querySelector(".fs-button"),videoVolumeProgress=document.querySelector(".video-volume-progress"),videoTimeProgress=document.querySelector(".video-time-progress"),videoSpeedString=document.querySelector(".video-speed-string"),videoSpeedContainer=document.querySelector(".video-speed");let videoVolume=videoVolumeProgress.value/100,videoSpeed=1,preventAction=!0;const buyNowButton=document.querySelector(".buy-now"),popupCloseButton=document.querySelector(".popup-close"),popupOverlayButton=document.querySelector(".popup-overlay"),togglePreventAction=()=>preventAction=!preventAction;buyNowButton.addEventListener("click",togglePreventAction),popupCloseButton.addEventListener("click",togglePreventAction),popupOverlayButton.addEventListener("click",togglePreventAction);const changeProgress=progress=>{let value=progress.value;progress.style.background=`linear-gradient(to right, #710707 0%, #710707 ${value}%, #c4c4c4 ${value}%, #c4c4c4 100%)`};videoTimeProgress.addEventListener("change",()=>changeProgress(videoTimeProgress));const videoPlayingMode=()=>{videoPlayer.play(),videoPlayButton.style.display="none",videoPlayBigButton.style.display="none",videoPauseButton.style.display="block"},videoPauseMode=()=>{videoPlayer.pause(),videoPauseButton.style.display="none",videoPlayButton.style.display="block",videoPlayBigButton.style.display="block"},videoPlayingToggle=()=>{switch(videoPlayer.paused){case!1:videoPauseMode();break;case!0:videoPlayingMode()}};videoPlayer.addEventListener("click",()=>videoPlayingToggle()),videoPlayer.addEventListener("ended",()=>{videoPauseMode()}),videoPlayer.addEventListener("timeupdate",()=>{videoTimeProgress.value=Math.floor(100/videoPlayer.duration*videoPlayer.currentTime),changeProgress(videoTimeProgress)}),videoTimeProgress.addEventListener("change",()=>{videoPlayer.currentTime=Math.floor(videoTimeProgress.value*videoPlayer.duration/100),changeProgress(videoTimeProgress)});const videoVolumeOn=()=>{videoVolumeOffButton.style.display="block",videoVolumeOnButton.style.display="none",videoPlayer.volume=videoVolume,videoVolumeProgress.value=100*videoVolume,changeProgress(videoVolumeProgress)},videoVolumeOff=()=>{videoVolumeOnButton.style.display="block",videoVolumeOffButton.style.display="none",videoPlayer.volume=0,videoVolumeProgress.value=0,changeProgress(videoVolumeProgress)};videoVolumeProgress.addEventListener("change",()=>{videoVolume=videoVolumeProgress.value/100,videoPlayer.volume=videoVolume,changeProgress(videoVolumeProgress),videoVolume?(videoVolumeOffButton.style.display="block",videoVolumeOnButton.style.display="none"):(videoVolumeOnButton.style.display="block",videoVolumeOffButton.style.display="none")});const videoSpeedChange=()=>{videoPlayer.playbackRate=videoSpeed,videoSpeedString.textContent=videoSpeed,videoSpeedContainer.style.opacity="1",setTimeout(()=>videoSpeedContainer.style.opacity="0",2e3)};videoVolumeOffButton.addEventListener("click",()=>videoVolumeOff()),videoVolumeOnButton.addEventListener("click",()=>videoVolumeOn()),videoPlayBigButton.addEventListener("click",()=>videoPlayingMode()),videoPlayButton.addEventListener("click",()=>videoPlayingMode()),videoPauseButton.addEventListener("click",()=>videoPauseMode()),document.addEventListener("keydown",(function(e){!preventAction||"Space"!=e.code&&"KeyM"!=e.code&&"Comma"!=e.code&&"Period"!=e.code||e.preventDefault()})),document.addEventListener("keyup",(function(e){if(preventAction)switch(e.code){case"Space":videoPlayingToggle();break;case"KeyM":0==videoVolumeProgress.value?videoVolumeOn():videoVolumeOff();break;case"Period":videoSpeed<3&&(videoSpeed+=.25),videoSpeedChange();break;case"Comma":videoSpeed>.25&&(videoSpeed-=.25),videoSpeedChange()}}));const videoSlider=new Swiper(".video-slider",{loop:!0,slidesPerView:3,spaceBetween:30,pagination:{bulletClass:"video-slider-bullet",bulletActiveClass:"video-slider-bullet-active",el:".video-slider-pagination",clickable:".true"},navigation:{nextEl:".video-slider-button-next",prevEl:".video-slider-button-prev"}});let videoSliderSlide=document.querySelectorAll(".video-slider-slide");const videoSliderSizing=()=>{videoSliderSlide.forEach(i=>i.style.height=.561947*i.offsetWidth+"px")};window.addEventListener("resize",()=>videoSliderSizing()),document.addEventListener("DOMContentLoaded",()=>videoSliderSizing());const galleryImgContainer=document.querySelector(".gallery-img-container");let images=[];for(let i=1;i<16;i++)image=`<img src="./assets/img/gallery/gallery${i}.avif" alt="gallery${i}">`,images.push(image);let i=0,arr=[],temp;for(;arr.length<15;)temp=Math.trunc(15*Math.random()+1),arr.includes(temp)||arr.push(temp);let randomImages=[];for(let i=0;i<15;i++)randomImages.push(images[arr[i]-1]);for(let i=1;i<16;i++)5!==i&&11!==i||randomImages.splice(i,0,'<div class="spacer"></div>');galleryImgContainer.innerHTML=randomImages.join("");const ticketBasicMinus=document.querySelectorAll(".amount-minus-basic"),ticketBasicPlus=document.querySelectorAll(".amount-plus-basic"),ticketSeniorMinus=document.querySelectorAll(".amount-minus-senior"),ticketSeniorPlus=document.querySelectorAll(".amount-plus-senior"),ticketBasicAmount=document.querySelectorAll(".basic-amount"),ticketSeniorAmount=document.querySelectorAll(".senior-amount"),ticketBasicSum=document.querySelector(".basic-sum"),ticketSeniorSum=document.querySelector(".senior-sum"),ticketTotalSum=document.querySelectorAll(".total-sum"),exhibitionTypeRadioButtons=document.querySelectorAll(".tickets-type-choise-input"),exhibitionTypeSelect=document.querySelector(".tickets-select"),ticketTimeInput=document.querySelector(".time"),ticketsDateInput=document.querySelector(".tickets-date"),ticketDateString=document.querySelector(".day"),exhibitionString=document.querySelector(".exhibition-string"),nameInput=document.querySelector(".input-name"),emailInput=document.querySelector(".input-email"),phoneInput=document.querySelector(".input-phone"),namePrompt=document.querySelector(".invalid-name"),emailPrompt=document.querySelector(".invalid-email"),phonePrompt=document.querySelector(".invalid-phone"),basicPriceString=document.querySelector(".basic-ticket-price"),seniorPriceString=document.querySelector(".senior-ticket-price");let counterBasic=1,counterSenior=1,exhibitionType=1;const ticketsTime=document.querySelector(".tickets-time");let availableTime=[];for(let i=9;i<19;i++)availableTime.push(i+" : 00",i+" : 30");availableTime.pop();for(let i=0;i<availableTime.length;i++)availableTime[i]=`<option value="${availableTime[i]}">${availableTime[i]}</option>`;ticketsTime.innerHTML=availableTime.join("");const daysOfWeek=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months=["January","February","March","April","May","June","July","August","September","October","November","December"],exhibTypes=["Permanent exhibition","Temporary exhibition","Combined Admission"];let today=new Date,dd=today.getDate(),mm=today.getMonth()+1,date;dd<10&&(dd="0"+dd),mm<10&&(mm="0"+mm),ticketsDateInput.setAttribute("min",today.getFullYear()+"-"+mm+"-"+dd);const setDate=()=>{let dateString=daysOfWeek[date.getDay()]+", "+months[date.getMonth()]+" "+date.getDate();ticketDateString.textContent=dateString,localStorage.setItem("dateString",dateString)},setAmountAndPrice=()=>{ticketBasicAmount.forEach(item=>item.textContent=counterBasic),ticketSeniorAmount.forEach(item=>item.textContent=counterSenior);let basicPrice=20*exhibitionType,seniorPrice=10*exhibitionType,basicPriceSum=counterBasic*basicPrice,seniorPriceSum=counterSenior*seniorPrice,totalPrice=basicPriceSum+seniorPriceSum;switch(ticketBasicSum.textContent=basicPriceSum,ticketSeniorSum.textContent=seniorPriceSum,basicPriceString.textContent=basicPrice,seniorPriceString.textContent=seniorPrice,exhibitionType){case"1":exhibitionString.textContent=exhibTypes[0];break;case"1.25":exhibitionString.textContent=exhibTypes[1];break;case"2":exhibitionString.textContent=exhibTypes[2]}exhibitionTypeSelect.value=exhibitionType,exhibitionTypeRadioButtons.forEach(i=>{i.value===exhibitionType&&(i.checked=!0)}),ticketTotalSum.forEach(item=>item.textContent=totalPrice),localStorage.setItem("exhibitionType",exhibitionType),localStorage.setItem("counterBasic",counterBasic),localStorage.setItem("counterSenior",counterSenior)};document.body.addEventListener("change",(function(e){switch(e.target.name){case"tickets-type-choise-input":exhibitionType=e.target.value;break;case"time":ticketTimeInput.textContent=e.target.value,localStorage.setItem("ticketTime",e.target.value);break;case"date":date=new Date(e.target.value),setDate();break;case"tickets-name":namePrompt.style.display=e.target.validity.valid?"none":"block";break;case"tickets-email":emailPrompt.style.display=e.target.validity.valid?"none":"block";break;case"tickets-phone":phonePrompt.style.display=e.target.validity.valid?"none":"block"}setAmountAndPrice()}));for(let i=0;i<ticketBasicMinus.length;i++)ticketBasicMinus[i].addEventListener("click",(function(){counterBasic>0&&(counterBasic--,setAmountAndPrice())})),ticketBasicPlus[i].addEventListener("click",(function(){counterBasic<20&&(counterBasic++,setAmountAndPrice())})),ticketSeniorMinus[i].addEventListener("click",(function(){counterSenior>0&&(counterSenior--,setAmountAndPrice())})),ticketSeniorPlus[i].addEventListener("click",(function(){counterSenior<20&&(counterSenior++,setAmountAndPrice())}));document.addEventListener("DOMContentLoaded",()=>{exhibitionType=localStorage.getItem("exhibitionType")||1,counterBasic=localStorage.getItem("counterBasic")||1,counterSenior=localStorage.getItem("counterSenior")||1,ticketTimeInput.textContent=localStorage.getItem("ticketTime")||"-- -- --",ticketDateString.textContent=localStorage.getItem("dateString")||"-- -- --",setAmountAndPrice()}),mapboxgl.accessToken="pk.eyJ1IjoiaWx1YS1keiIsImEiOiJja3VtZ2U3NWIwZTY2Mm9waXp3anBwNGpuIn0.bUEBVKqZ5IAe5T1_vQSZAA";const map=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/light-v10",center:[2.3364123,48.860915],zoom:16});map.addControl(new mapboxgl.NavigationControl);const marker1=new mapboxgl.Marker({color:"black"}).setLngLat([2.3364,48.86091]).addTo(map),marker2=new mapboxgl.Marker({color:"grey"}).setLngLat([2.3333,48.8602]).addTo(map),marker3=new mapboxgl.Marker({color:"grey"}).setLngLat([2.3397,48.8607]).addTo(map),marker4=new mapboxgl.Marker({color:"grey"}).setLngLat([2.333,48.8619]).addTo(map),marker5=new mapboxgl.Marker({color:"grey"}).setLngLat([2.3365,48.8625]).addTo(map);console.log("Предварительная оценка: 139 баллов"),console.log("Не выполненные/частично выполненные пункты:"),console.log("Слайдер в секции Video:"),console.log("-1 Возможно воспроизведение нескольких видео одновременно"),console.log("-2 Проигрывание видео не останавливается при переключении слайдов"),console.log("-1 Слайдер переключается кликами по стрелкам, но при этом не переключается основное видео"),console.log("-1 Слайдер переключается кликами буллитам, но при этом не переключается основное видео"),console.log("-2 Слайдер не влияет на воспроизведение основного видео"),console.log("Кастомный видеоплеер:"),console.log("-6 Не реализован режим FullScreen"),console.log("Анимация в секции Gallery:"),console.log("-8 Не реализована"),console.log("Дополнительный функционал:"),console.log("Клавиша подъема на верх страницы, которая всегда сопровождает Вас при навигации по странице"),console.log("Элементы управления видеоплеером по умолчанию скрыты, но при наведении курсора на плеер они становятся видимыми");